-- foodtest.banner_home definição

-- Drop table

-- DROP TABLE foodtest.banner_home;

CREATE TABLE foodtest.banner_home (
	id serial4 NOT NULL,
	link_imagem varchar(255) NOT NULL,
	link_banner varchar(255) NULL,
	ativo bool DEFAULT true NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT banner_home_pkey PRIMARY KEY (id)
);


-- foodtest.beneficio definição

-- Drop table

-- DROP TABLE foodtest.beneficio;

CREATE TABLE foodtest.beneficio (
	id serial4 NOT NULL,
	nome varchar(255) NOT NULL,
	logo varchar(255) NULL,
	pontos_necessarios int4 NULL,
	regras_beneficio text NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	"deletedAt" timestamptz NULL,
	plataforma varchar(255) NOT NULL,
	CONSTRAINT beneficio_pkey PRIMARY KEY (id)
);


-- foodtest.campanha definição

-- Drop table

-- DROP TABLE foodtest.campanha;

CREATE TABLE foodtest.campanha (
	id serial4 NOT NULL,
	titulo varchar(255) NOT NULL,
	link_imagem varchar(255) NULL,
	pontuacao int4 NOT NULL,
	data_inicio timestamptz NOT NULL,
	data_fim timestamptz NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	ativo bool NULL,
	CONSTRAINT campanha_pkey PRIMARY KEY (id)
);


-- foodtest.categoria_permissao definição

-- Drop table

-- DROP TABLE foodtest.categoria_permissao;

CREATE TABLE foodtest.categoria_permissao (
	id varchar(255) NOT NULL,
	descricao varchar(255) NOT NULL,
	ordem int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT categoria_permissao_pkey PRIMARY KEY (id)
);


-- foodtest.categoria_permissao_adm definição

-- Drop table

-- DROP TABLE foodtest.categoria_permissao_adm;

CREATE TABLE foodtest.categoria_permissao_adm (
	id varchar(255) NOT NULL,
	descricao varchar(255) NOT NULL,
	ordem int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT categoria_permissao_adm_pkey PRIMARY KEY (id)
);


-- foodtest.categoria_permissao_empresa definição

-- Drop table

-- DROP TABLE foodtest.categoria_permissao_empresa;

CREATE TABLE foodtest.categoria_permissao_empresa (
	id varchar(255) NOT NULL,
	descricao varchar(255) NOT NULL,
	ordem int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT categoria_permissao_empresa_pkey PRIMARY KEY (id)
);


-- foodtest.categoria_produto definição

-- Drop table

-- DROP TABLE foodtest.categoria_produto;

CREATE TABLE foodtest.categoria_produto (
	id serial4 NOT NULL,
	descricao varchar(255) NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	nome varchar(255) NOT NULL,
	exibir_categoria bool DEFAULT true NOT NULL,
	CONSTRAINT categoria_produto_pkey PRIMARY KEY (id)
);


-- foodtest.estado definição

-- Drop table

-- DROP TABLE foodtest.estado;

CREATE TABLE foodtest.estado (
	id serial4 NOT NULL,
	nome varchar(255) NOT NULL,
	sigla varchar(255) NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT estado_pkey PRIMARY KEY (id)
);


-- foodtest.grupo_usuario definição

-- Drop table

-- DROP TABLE foodtest.grupo_usuario;

CREATE TABLE foodtest.grupo_usuario (
	id serial4 NOT NULL,
	descricao varchar(255) NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT grupo_usuario_pkey PRIMARY KEY (id)
);


-- foodtest.grupo_usuario_adm definição

-- Drop table

-- DROP TABLE foodtest.grupo_usuario_adm;

CREATE TABLE foodtest.grupo_usuario_adm (
	id serial4 NOT NULL,
	descricao varchar(255) NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT grupo_usuario_adm_pkey PRIMARY KEY (id)
);


-- foodtest.parceiro definição

-- Drop table

-- DROP TABLE foodtest.parceiro;

CREATE TABLE foodtest.parceiro (
	id serial4 NOT NULL,
	nome varchar(255) NOT NULL,
	link_logo varchar(255) NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT parceiro_pkey PRIMARY KEY (id)
);


-- foodtest.produto_backup_carga_nova definição

-- Drop table

-- DROP TABLE foodtest.produto_backup_carga_nova;

CREATE TABLE foodtest.produto_backup_carga_nova (
	id int4 NOT NULL,
	gtin_ean varchar(255) NULL,
	nome varchar(255) NULL,
	CONSTRAINT produto_backup_carga_nova_pkey PRIMARY KEY (id)
);


-- foodtest.produto_backup_exclusao definição

-- Drop table

-- DROP TABLE foodtest.produto_backup_exclusao;

CREATE TABLE foodtest.produto_backup_exclusao (
	id int4 NOT NULL,
	ativo bool NULL,
	nome varchar(255) NULL,
	link_imagem varchar(255) NULL,
	gtin_ean varchar(255) NULL,
	slug varchar(255) NULL,
	id_subcategoria_produto int4 NULL,
	id_empresa int4 NULL,
	id_categoria_produto int4 NULL,
	id_marca int4 NULL,
	lista_ingredientes text NULL,
	"createdAt" timestamptz NULL,
	"updatedAt" timestamptz NULL,
	CONSTRAINT produto_backup_exclusao_pkey PRIMARY KEY (id)
);


-- foodtest.produto_backup_imagens definição

-- Drop table

-- DROP TABLE foodtest.produto_backup_imagens;

CREATE TABLE foodtest.produto_backup_imagens (
	gtin_ean varchar(255) NOT NULL,
	link_imagem_anterior varchar(255) NULL,
	CONSTRAINT produto_backup_imagens_pkey PRIMARY KEY (gtin_ean)
);


-- foodtest.produto_nao_cadastrado definição

-- Drop table

-- DROP TABLE foodtest.produto_nao_cadastrado;

CREATE TABLE foodtest.produto_nao_cadastrado (
	id serial4 NOT NULL,
	codigo_barras varchar(255) NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT produto_nao_cadastrado_pkey PRIMARY KEY (id)
);


-- foodtest.cidade definição

-- Drop table

-- DROP TABLE foodtest.cidade;

CREATE TABLE foodtest.cidade (
	id serial4 NOT NULL,
	nome varchar(255) NOT NULL,
	id_estado int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT cidade_pkey PRIMARY KEY (id),
	CONSTRAINT cidade_id_estado_fkey FOREIGN KEY (id_estado) REFERENCES foodtest.estado(id)
);


-- foodtest.empresa definição

-- Drop table

-- DROP TABLE foodtest.empresa;

CREATE TABLE foodtest.empresa (
	id serial4 NOT NULL,
	cnpj varchar(255) NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	nome_fantasia varchar(255) NOT NULL,
	razao_social varchar(255) NULL,
	id_cidade int4 NULL,
	cep varchar(255) NULL,
	bairro varchar(255) NULL,
	logradouro varchar(255) NULL,
	numero varchar(255) NULL,
	complemento varchar(255) NULL,
	nome_contato varchar(255) NULL,
	email_empresa varchar(255) NULL,
	ativo varchar(255) NULL,
	plano varchar(255) NOT NULL,
	link_imagem varchar(255) NULL,
	CONSTRAINT empresa_pkey PRIMARY KEY (id),
	CONSTRAINT empresa_id_cidade_fkey FOREIGN KEY (id_cidade) REFERENCES foodtest.cidade(id)
);


-- foodtest.grupo_usuario_empresa definição

-- Drop table

-- DROP TABLE foodtest.grupo_usuario_empresa;

CREATE TABLE foodtest.grupo_usuario_empresa (
	id serial4 NOT NULL,
	descricao varchar(255) NOT NULL,
	id_empresa int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT grupo_usuario_empresa_pkey PRIMARY KEY (id),
	CONSTRAINT grupo_usuario_empresa_id_empresa_fkey FOREIGN KEY (id_empresa) REFERENCES foodtest.empresa(id)
);


-- foodtest.marca definição

-- Drop table

-- DROP TABLE foodtest.marca;

CREATE TABLE foodtest.marca (
	id serial4 NOT NULL,
	nome varchar(255) NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	"deletedAt" timestamptz NULL,
	id_empresa int4 NULL,
	link_imagem varchar(255) NULL,
	CONSTRAINT marca_pkey PRIMARY KEY (id),
	CONSTRAINT marca_id_empresa_fkey FOREIGN KEY (id_empresa) REFERENCES foodtest.empresa(id) ON DELETE CASCADE ON UPDATE CASCADE
);


-- foodtest.permissao definição

-- Drop table

-- DROP TABLE foodtest.permissao;

CREATE TABLE foodtest.permissao (
	id serial4 NOT NULL,
	descricao varchar(255) NULL,
	codigo varchar(255) NOT NULL,
	id_categoria_permissao varchar(255) NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT permissao_codigo_key UNIQUE (codigo),
	CONSTRAINT permissao_pkey PRIMARY KEY (id),
	CONSTRAINT permissao_id_categoria_permissao_fkey FOREIGN KEY (id_categoria_permissao) REFERENCES foodtest.categoria_permissao(id)
);


-- foodtest.permissao_adm definição

-- Drop table

-- DROP TABLE foodtest.permissao_adm;

CREATE TABLE foodtest.permissao_adm (
	id serial4 NOT NULL,
	descricao varchar(255) NULL,
	codigo varchar(255) NOT NULL,
	id_categoria_permissao_adm varchar(255) NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT permissao_adm_codigo_key UNIQUE (codigo),
	CONSTRAINT permissao_adm_pkey PRIMARY KEY (id),
	CONSTRAINT permissao_adm_id_categoria_permissao_adm_fkey FOREIGN KEY (id_categoria_permissao_adm) REFERENCES foodtest.categoria_permissao_adm(id)
);


-- foodtest.permissao_empresa definição

-- Drop table

-- DROP TABLE foodtest.permissao_empresa;

CREATE TABLE foodtest.permissao_empresa (
	id serial4 NOT NULL,
	descricao varchar(255) NULL,
	codigo varchar(255) NOT NULL,
	id_categoria_permissao_empresa varchar(255) NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT permissao_empresa_codigo_key UNIQUE (codigo),
	CONSTRAINT permissao_empresa_pkey PRIMARY KEY (id),
	CONSTRAINT permissao_empresa_id_categoria_permissao_empresa_fkey FOREIGN KEY (id_categoria_permissao_empresa) REFERENCES foodtest.categoria_permissao_empresa(id)
);


-- foodtest.subcategoria_produto definição

-- Drop table

-- DROP TABLE foodtest.subcategoria_produto;

CREATE TABLE foodtest.subcategoria_produto (
	id serial4 NOT NULL,
	id_categoria_produto int4 NOT NULL,
	nome varchar(255) NOT NULL,
	descricao varchar(255) NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	link_imagem varchar(255) NULL,
	CONSTRAINT subcategoria_produto_pkey PRIMARY KEY (id),
	CONSTRAINT subcategoria_produto_id_categoria_produto_fkey FOREIGN KEY (id_categoria_produto) REFERENCES foodtest.categoria_produto(id)
);


-- foodtest.usuario definição

-- Drop table

-- DROP TABLE foodtest.usuario;

CREATE TABLE foodtest.usuario (
	id serial4 NOT NULL,
	nome varchar(255) NULL,
	email varchar(255) NOT NULL,
	senha varchar(255) NOT NULL,
	cpf varchar(255) NULL,
	dados_pessoais json NULL,
	dados_socioeconomicos json NULL,
	cep varchar(255) NULL,
	logradouro varchar(255) NULL,
	bairro varchar(255) NULL,
	numero_residencia varchar(255) NULL,
	numero_whatsapp varchar(255) NULL,
	id_cidade int4 NULL,
	url_avatar varchar(255) NULL,
	id_grupo_usuario int4 NOT NULL,
	id_empresa int4 NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	is_primeiro_acesso bool NULL,
	is_cadastro_completo bool DEFAULT false NULL,
	complemento_endereco varchar(255) NULL,
	pontuacao int4 DEFAULT 0 NULL,
	is_importacao bool DEFAULT false NOT NULL,
	email_enviado bool DEFAULT false NOT NULL,
	classe_social varchar(50) DEFAULT NULL::character varying NULL,
	CONSTRAINT usuario_pkey PRIMARY KEY (id),
	CONSTRAINT usuario_id_cidade_fkey FOREIGN KEY (id_cidade) REFERENCES foodtest.cidade(id),
	CONSTRAINT usuario_id_empresa_fkey FOREIGN KEY (id_empresa) REFERENCES foodtest.empresa(id),
	CONSTRAINT usuario_id_grupo_usuario_fkey FOREIGN KEY (id_grupo_usuario) REFERENCES foodtest.grupo_usuario(id)
);


-- foodtest.usuario_adm definição

-- Drop table

-- DROP TABLE foodtest.usuario_adm;

CREATE TABLE foodtest.usuario_adm (
	id serial4 NOT NULL,
	nome varchar(255) NOT NULL,
	email varchar(255) NOT NULL,
	senha varchar(255) NOT NULL,
	id_grupo_usuario_adm int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT usuario_adm_pkey PRIMARY KEY (id),
	CONSTRAINT usuario_adm_id_grupo_usuario_adm_fkey FOREIGN KEY (id_grupo_usuario_adm) REFERENCES foodtest.grupo_usuario_adm(id)
);


-- foodtest.usuario_empresa definição

-- Drop table

-- DROP TABLE foodtest.usuario_empresa;

CREATE TABLE foodtest.usuario_empresa (
	id serial4 NOT NULL,
	nome varchar(255) NOT NULL,
	email varchar(255) NOT NULL,
	senha varchar(255) NOT NULL,
	id_grupo_usuario_empresa int4 NOT NULL,
	id_empresa int4 NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT usuario_empresa_pkey PRIMARY KEY (id),
	CONSTRAINT usuario_empresa_id_empresa_fkey FOREIGN KEY (id_empresa) REFERENCES foodtest.empresa(id),
	CONSTRAINT usuario_empresa_id_grupo_usuario_empresa_fkey FOREIGN KEY (id_grupo_usuario_empresa) REFERENCES foodtest.grupo_usuario_empresa(id)
);


-- foodtest.grupo_usuario_permissao definição

-- Drop table

-- DROP TABLE foodtest.grupo_usuario_permissao;

CREATE TABLE foodtest.grupo_usuario_permissao (
	id serial4 NOT NULL,
	id_grupo_usuario int4 NOT NULL,
	id_permissao int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT grupo_usuario_permissao_pkey PRIMARY KEY (id),
	CONSTRAINT grupo_usuario_permissao_id_grupo_usuario_fkey FOREIGN KEY (id_grupo_usuario) REFERENCES foodtest.grupo_usuario(id),
	CONSTRAINT grupo_usuario_permissao_id_permissao_fkey FOREIGN KEY (id_permissao) REFERENCES foodtest.permissao(id)
);


-- foodtest.grupo_usuario_permissao_adm definição

-- Drop table

-- DROP TABLE foodtest.grupo_usuario_permissao_adm;

CREATE TABLE foodtest.grupo_usuario_permissao_adm (
	id serial4 NOT NULL,
	id_grupo_usuario_adm int4 NOT NULL,
	id_permissao_adm int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT grupo_usuario_permissao_adm_pkey PRIMARY KEY (id),
	CONSTRAINT grupo_usuario_permissao_adm_id_grupo_usuario_adm_fkey FOREIGN KEY (id_grupo_usuario_adm) REFERENCES foodtest.grupo_usuario_adm(id),
	CONSTRAINT grupo_usuario_permissao_adm_id_permissao_adm_fkey FOREIGN KEY (id_permissao_adm) REFERENCES foodtest.permissao_adm(id)
);


-- foodtest.grupo_usuario_permissao_empresa definição

-- Drop table

-- DROP TABLE foodtest.grupo_usuario_permissao_empresa;

CREATE TABLE foodtest.grupo_usuario_permissao_empresa (
	id serial4 NOT NULL,
	id_grupo_usuario_empresa int4 NOT NULL,
	id_permissao_empresa int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT grupo_usuario_permissao_empresa_pkey PRIMARY KEY (id),
	CONSTRAINT grupo_usuario_permissao_empresa_id_grupo_usuario_empresa_fkey FOREIGN KEY (id_grupo_usuario_empresa) REFERENCES foodtest.grupo_usuario_empresa(id),
	CONSTRAINT grupo_usuario_permissao_empresa_id_permissao_empresa_fkey FOREIGN KEY (id_permissao_empresa) REFERENCES foodtest.permissao_empresa(id)
);


-- foodtest.notificacoes definição

-- Drop table

-- DROP TABLE foodtest.notificacoes;

CREATE TABLE foodtest.notificacoes (
	id serial4 NOT NULL,
	titulo varchar(255) NOT NULL,
	mensagem text NOT NULL,
	tipo varchar(50) DEFAULT 'info'::character varying NOT NULL,
	dados json NULL,
	lida bool DEFAULT false NOT NULL,
	id_usuario_destino int4 NULL,
	data_expiracao timestamptz NULL,
	created_at timestamptz NOT NULL,
	updated_at timestamptz NOT NULL,
	CONSTRAINT notificacoes_pkey PRIMARY KEY (id),
	CONSTRAINT notificacoes_id_usuario_destino_fkey FOREIGN KEY (id_usuario_destino) REFERENCES foodtest.usuario(id) ON DELETE SET NULL ON UPDATE CASCADE
);
CREATE INDEX notificacoes_created_at ON foodtest.notificacoes USING btree (created_at);
CREATE INDEX notificacoes_id_usuario_destino ON foodtest.notificacoes USING btree (id_usuario_destino);
CREATE INDEX notificacoes_lida ON foodtest.notificacoes USING btree (lida);
CREATE INDEX notificacoes_tipo ON foodtest.notificacoes USING btree (tipo);


-- foodtest.pesquisa_subcategoria definição

-- Drop table

-- DROP TABLE foodtest.pesquisa_subcategoria;

CREATE TABLE foodtest.pesquisa_subcategoria (
	id serial4 NOT NULL,
	titulo varchar(255) NOT NULL,
	descricao text NULL,
	data_inicio timestamptz NOT NULL,
	data_fim timestamptz NOT NULL,
	ativo bool NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	id_subcategoria_produto int4 NULL,
	id_categoria_produto int4 NULL,
	precisa_cadastro_completo bool DEFAULT true NOT NULL,
	id_campanha int4 NULL,
	CONSTRAINT pesquisa_subcategoria_pkey PRIMARY KEY (id),
	CONSTRAINT pesquisa_subcategoria_id_campanha_fkey FOREIGN KEY (id_campanha) REFERENCES foodtest.campanha(id),
	CONSTRAINT pesquisa_subcategoria_id_categoria_produto_fkey FOREIGN KEY (id_categoria_produto) REFERENCES foodtest.categoria_produto(id),
	CONSTRAINT pesquisa_subcategoria_id_subcategoria_produto_fkey FOREIGN KEY (id_subcategoria_produto) REFERENCES foodtest.subcategoria_produto(id)
);


-- foodtest.pontos_usuario definição

-- Drop table

-- DROP TABLE foodtest.pontos_usuario;

CREATE TABLE foodtest.pontos_usuario (
	id serial4 NOT NULL,
	id_usuario int4 NOT NULL,
	pontos int4 NOT NULL,
	tipo_origem foodtest."enum_pontos_usuario_tipo_origem" NOT NULL,
	origem_id int4 NULL,
	data_expiracao timestamptz NOT NULL,
	observacoes text NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	status varchar(20) DEFAULT 'ativo'::character varying NOT NULL,
	CONSTRAINT pontos_usuario_pkey PRIMARY KEY (id),
	CONSTRAINT pontos_usuario_id_usuario_fkey FOREIGN KEY (id_usuario) REFERENCES foodtest.usuario(id) ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE INDEX idx_pontos_usuario_origem ON foodtest.pontos_usuario USING btree (tipo_origem, origem_id);
CREATE INDEX idx_pontos_usuario_usuario_status ON foodtest.pontos_usuario USING btree (id_usuario, status);


-- foodtest.produto definição

-- Drop table

-- DROP TABLE foodtest.produto;

CREATE TABLE foodtest.produto (
	id serial4 NOT NULL,
	id_empresa int4 NOT NULL,
	id_categoria_produto int4 NOT NULL,
	nome varchar(255) NOT NULL,
	link_imagem varchar(255) NOT NULL,
	gtin_ean varchar(255) NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	id_subcategoria_produto int4 NULL,
	ativo bool DEFAULT true NOT NULL,
	slug varchar(255) NULL,
	id_marca int4 NULL,
	lista_ingredientes text NULL,
	CONSTRAINT produto_pkey PRIMARY KEY (id),
	CONSTRAINT produto_id_categoria_produto_fkey FOREIGN KEY (id_categoria_produto) REFERENCES foodtest.categoria_produto(id),
	CONSTRAINT produto_id_empresa_fkey FOREIGN KEY (id_empresa) REFERENCES foodtest.empresa(id),
	CONSTRAINT produto_id_marca_fkey FOREIGN KEY (id_marca) REFERENCES foodtest.marca(id),
	CONSTRAINT produto_id_subcategoria_produto_fkey FOREIGN KEY (id_subcategoria_produto) REFERENCES foodtest.subcategoria_produto(id)
);


-- foodtest.produto_parceiro definição

-- Drop table

-- DROP TABLE foodtest.produto_parceiro;

CREATE TABLE foodtest.produto_parceiro (
	id serial4 NOT NULL,
	id_produto int4 NOT NULL,
	id_parceiro int4 NOT NULL,
	link_produto varchar(255) NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT produto_parceiro_pkey PRIMARY KEY (id),
	CONSTRAINT produto_parceiro_id_parceiro_fkey FOREIGN KEY (id_parceiro) REFERENCES foodtest.parceiro(id),
	CONSTRAINT produto_parceiro_id_produto_fkey FOREIGN KEY (id_produto) REFERENCES foodtest.produto(id)
);


-- foodtest.requisicao_recuperacao_senha definição

-- Drop table

-- DROP TABLE foodtest.requisicao_recuperacao_senha;

CREATE TABLE foodtest.requisicao_recuperacao_senha (
	id serial4 NOT NULL,
	id_usuario int4 NOT NULL,
	data_expiracao timestamptz NOT NULL,
	codigo_verificacao varchar(6) NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT requisicao_recuperacao_senha_pkey PRIMARY KEY (id),
	CONSTRAINT requisicao_recuperacao_senha_id_usuario_fkey FOREIGN KEY (id_usuario) REFERENCES foodtest.usuario(id)
);


-- foodtest.resgate_beneficio definição

-- Drop table

-- DROP TABLE foodtest.resgate_beneficio;

CREATE TABLE foodtest.resgate_beneficio (
	id serial4 NOT NULL,
	id_beneficio int4 NOT NULL,
	id_usuario int4 NOT NULL,
	status int4 NOT NULL,
	pontos_requisitados int4 NOT NULL,
	plataforma varchar(255) NULL,
	codigo_cupom varchar(255) NULL,
	valor_cupom float8 NULL,
	prazo_resgate timestamptz NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	"deletedAt" timestamptz NULL,
	CONSTRAINT resgate_beneficio_pkey PRIMARY KEY (id),
	CONSTRAINT resgate_beneficio_id_beneficio_fkey FOREIGN KEY (id_beneficio) REFERENCES foodtest.beneficio(id),
	CONSTRAINT resgate_beneficio_id_usuario_testador_fkey FOREIGN KEY (id_usuario) REFERENCES foodtest.usuario(id)
);


-- foodtest.pesquisa_produto definição

-- Drop table

-- DROP TABLE foodtest.pesquisa_produto;

CREATE TABLE foodtest.pesquisa_produto (
	id serial4 NOT NULL,
	titulo varchar(255) NOT NULL,
	id_empresa int4 NULL,
	link_imagem varchar(255) NULL,
	id_campanha int4 NULL,
	descricao text NULL,
	data_inicio timestamptz NOT NULL,
	data_fim timestamptz NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	id_categoria_produto int4 NULL,
	id_subcategoria_produto int4 NULL,
	id_produto int4 NULL,
	ativo bool DEFAULT true NOT NULL,
	precisa_cadastro_completo bool DEFAULT true NOT NULL,
	CONSTRAINT pesquisa_produto_pkey PRIMARY KEY (id),
	CONSTRAINT pesquisa_produto_id_campanha_fkey FOREIGN KEY (id_campanha) REFERENCES foodtest.campanha(id),
	CONSTRAINT pesquisa_produto_id_categoria_produto_fkey FOREIGN KEY (id_categoria_produto) REFERENCES foodtest.categoria_produto(id),
	CONSTRAINT pesquisa_produto_id_empresa_fkey FOREIGN KEY (id_empresa) REFERENCES foodtest.empresa(id),
	CONSTRAINT pesquisa_produto_id_produto_fkey FOREIGN KEY (id_produto) REFERENCES foodtest.produto(id),
	CONSTRAINT pesquisa_produto_id_subcategoria_produto_fkey FOREIGN KEY (id_subcategoria_produto) REFERENCES foodtest.subcategoria_produto(id)
);


-- foodtest.pesquisa_produto_recomendado definição

-- Drop table

-- DROP TABLE foodtest.pesquisa_produto_recomendado;

CREATE TABLE foodtest.pesquisa_produto_recomendado (
	id serial4 NOT NULL,
	id_produto int4 NOT NULL,
	ordem int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT pesquisa_produto_recomendado_pkey PRIMARY KEY (id),
	CONSTRAINT pesquisa_produto_recomendado_id_produto_fkey FOREIGN KEY (id_produto) REFERENCES foodtest.produto(id)
);


-- foodtest.resposta_questionario_usuario definição

-- Drop table

-- DROP TABLE foodtest.resposta_questionario_usuario;

CREATE TABLE foodtest.resposta_questionario_usuario (
	id serial4 NOT NULL,
	id_pesquisa_subcategoria int4 NULL,
	id_usuario int4 NOT NULL,
	id_produto int4 NULL,
	pontos_ganhos int4 NOT NULL,
	resposta json NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	id_pesquisa_produto int4 NULL,
	CONSTRAINT resposta_questionario_usuario_pkey PRIMARY KEY (id),
	CONSTRAINT resposta_questionario_usuario_id_pesquisa_produto_fkey FOREIGN KEY (id_pesquisa_produto) REFERENCES foodtest.pesquisa_produto(id),
	CONSTRAINT resposta_questionario_usuario_id_pesquisa_subcategoria_fkey FOREIGN KEY (id_pesquisa_subcategoria) REFERENCES foodtest.pesquisa_subcategoria(id),
	CONSTRAINT resposta_questionario_usuario_id_produto_fkey FOREIGN KEY (id_produto) REFERENCES foodtest.produto(id),
	CONSTRAINT resposta_questionario_usuario_id_usuario_fkey FOREIGN KEY (id_usuario) REFERENCES foodtest.usuario(id)
);


-- foodtest.sessao_pesquisa definição

-- Drop table

-- DROP TABLE foodtest.sessao_pesquisa;

CREATE TABLE foodtest.sessao_pesquisa (
	id serial4 NOT NULL,
	titulo varchar(255) NOT NULL,
	link_imagem varchar(255) NULL,
	descricao text NULL,
	id_pesquisa_produto int4 NULL,
	id_pesquisa_subcategoria int4 NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	CONSTRAINT sessao_pesquisa_pkey PRIMARY KEY (id),
	CONSTRAINT sessao_pesquisa_id_pesquisa_produto_fkey FOREIGN KEY (id_pesquisa_produto) REFERENCES foodtest.pesquisa_produto(id),
	CONSTRAINT sessao_pesquisa_id_pesquisa_subcategoria_fkey FOREIGN KEY (id_pesquisa_subcategoria) REFERENCES foodtest.pesquisa_subcategoria(id)
);


-- foodtest.pergunta_pesquisa definição

-- Drop table

-- DROP TABLE foodtest.pergunta_pesquisa;

CREATE TABLE foodtest.pergunta_pesquisa (
	id serial4 NOT NULL,
	titulo text NOT NULL,
	tipo_resposta int4 NOT NULL,
	obrigatoria bool NOT NULL,
	link_imagem varchar(255) NULL,
	pontuacao int4 NULL,
	opcoes json NULL,
	id_sessao_pesquisa int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	filtro bool DEFAULT false NOT NULL,
	benchmark bool DEFAULT false NOT NULL,
	ordem int4 NULL,
	CONSTRAINT pergunta_pesquisa_pkey PRIMARY KEY (id),
	CONSTRAINT pergunta_pesquisa_id_sessao_pesquisa_fkey FOREIGN KEY (id_sessao_pesquisa) REFERENCES foodtest.sessao_pesquisa(id)
);


-- foodtest.resposta_pergunta_pesquisa definição

-- Drop table

-- DROP TABLE foodtest.resposta_pergunta_pesquisa;

CREATE TABLE foodtest.resposta_pergunta_pesquisa (
	id serial4 NOT NULL,
	resposta json NULL,
	id_pergunta_pesquisa int4 NOT NULL,
	id_usuario int4 NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	id_produto int4 NULL,
	CONSTRAINT resposta_pergunta_pesquisa_pkey PRIMARY KEY (id),
	CONSTRAINT resposta_pergunta_pesquisa_id_pergunta_pesquisa_fkey FOREIGN KEY (id_pergunta_pesquisa) REFERENCES foodtest.pergunta_pesquisa(id),
	CONSTRAINT resposta_pergunta_pesquisa_id_produto_fkey FOREIGN KEY (id_produto) REFERENCES foodtest.produto(id),
	CONSTRAINT resposta_pergunta_pesquisa_id_usuario_fkey FOREIGN KEY (id_usuario) REFERENCES foodtest.usuario(id)
);


-- foodtest.comentarios definição

-- Drop table

-- DROP TABLE foodtest.comentarios;

CREATE TABLE foodtest.comentarios (
	id serial4 NOT NULL,
	id_usuario int4 NOT NULL,
	id_pesquisa_produto int4 NULL,
	id_pesquisa_subcategoria int4 NULL,
	id_resposta_pesquisa int4 NULL,
	id_produto int4 NULL,
	comentario text NOT NULL,
	"createdAt" timestamptz NOT NULL,
	"updatedAt" timestamptz NOT NULL,
	"deletedAt" timestamptz NULL,
	CONSTRAINT comentarios_pkey PRIMARY KEY (id),
	CONSTRAINT comentarios_id_pesquisa_produto_fkey FOREIGN KEY (id_pesquisa_produto) REFERENCES foodtest.pesquisa_produto(id),
	CONSTRAINT comentarios_id_pesquisa_subcategoria_fkey FOREIGN KEY (id_pesquisa_subcategoria) REFERENCES foodtest.pesquisa_subcategoria(id),
	CONSTRAINT comentarios_id_produto_fkey FOREIGN KEY (id_produto) REFERENCES foodtest.produto(id),
	CONSTRAINT comentarios_id_resposta_pesquisa_fkey FOREIGN KEY (id_resposta_pesquisa) REFERENCES foodtest.resposta_pergunta_pesquisa(id),
	CONSTRAINT comentarios_id_usuario_fkey FOREIGN KEY (id_usuario) REFERENCES foodtest.usuario(id)
);